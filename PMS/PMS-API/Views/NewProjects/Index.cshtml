@model IEnumerable<PMS_API.Models.NewProject>
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div id="content" class="span10">
    <ul class="breadcrumb">
        <li>
            <i class="icon-home"></i>
            <a href="index.html">Home</a>
            <i class="icon-angle-right"></i>
        </li>
        <li>
            <i class="icon-edit"></i>
            <a href="#">All Enquiry</a>
        </li>
    </ul>

    <!--/row-->
    <div class="row-fluid sortable">
        <div class="box span12">
            <div class="box-header" data-original-title="">
                <h2><i class="halflings-icon edit"></i><span class="break"></span>All Enquiry</h2>
                <div class="box-icon">
                    <a href="#" class="btn-setting"><i class="halflings-icon wrench"></i></a>
                    <a href="#" class="btn-minimize"><i class="halflings-icon chevron-up"></i></a>
                    <a href="#" class="btn-close"><i class="halflings-icon remove"></i></a>
                </div>
            </div>
            @*@using (Html.BeginForm())
                {     @Html.AntiForgeryToken()*@
            <div class="box-content">

                <table class="table table-striped table-bordered bootstrap-datatable datatable">
                    <thead>
                        <tr>
                            <th>Project Name</th>
                            <th>Owner</th>
                            <th>Registered on</th>
                            <th>BusinessPartner</th>
                            <th>Health</th>
                            <th>Status</th>
                            <th>Visits</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {

                            <tr>
                                <td>@Html.DisplayFor(modelItem => item.ProjectName)</td>
                                <td>@Html.DisplayFor(modelItem => item.Owner.FullName)</td>
                                <td>@Html.DisplayFor(modelItem => item.CommencedOn)</td>
                                <td>@Html.DisplayFor(modelItem => item.BusinessPartner.FullName)</td>
                                <td>@Html.DisplayFor(modelItem => item.VisitReports.LastOrDefault().ProjectHealth.Name)</td>
                                <td>@Html.DisplayFor(modelItem => item.VisitReports.LastOrDefault().ProjectStatu.Name)</td>
                                <td>
                                    @{
                                        if (@item.VisitReports.Count > 0)
                                        {
                                            @Html.ActionLink(item.VisitReports.Count() + " Visits", "visits", "VisitReports", item.VisitReports.FirstOrDefault().NewProjectId)
                                        }
                                        else
                                        {
                                            @Html.Label("0 Visits")
                                        }
                                    }
                                </td>
                                @*<td>@Html.DisplayFor(modelItem => item.CreatedDate)</td>
                                    <td>@Html.DisplayFor(modelItem => item.CustomerName)</td>
                                    <td class="center">
                                    @if (item.Priority == "High Potential")
                                    {
                                    <span class="label label-success">@Html.DisplayFor(modelItem => item.Priority)</span>
                                    }
                                    else if (item.Priority == "Urgent")
                                    {
                                    <span class="label label-important">@Html.DisplayFor(modelItem => item.Priority) </span>
                                    }
                                    else if (item.Priority == "Normal")
                                    {
                                    <span class="label label-warning">@Html.DisplayFor(modelItem => item.Priority)  </span>
                                    }
                                    </td>

                                    <td class="center">
                                    @if (item.Status == "Created")
                                    {
                                    <span class="label label-warning">@Html.DisplayFor(modelItem => item.Status)</span>
                                    }
                                    else if (item.Status == "Updated")
                                    {
                                    <span class="label label-success">@Html.DisplayFor(modelItem => item.Status)</span>
                                    }

                                    </td>*@

                                <td class="center">
                                    <a class="btn btn-info" href="/NewProjects/Edit/@item.Id">
                                        <i class="halflings-icon white edit"></i>
                                    </a>
                                    <a class="btn btn-danger" href="#">
                                        <i class="halflings-icon white trash"></i>
                                    </a>
                                </td>
                            </tr>




                                        }
                    </tbody>
                </table>
            </div>
        </div><!--/span-->

    </div><!--/row-->

</div>
